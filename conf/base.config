/*
========================================================================================
    Base Process Configuration
========================================================================================
    Default settings for SLURM execution
========================================================================================
*/

process {
    // Executor
    executor = 'slurm'

    // Error handling strategy
    errorStrategy = {
        task.exitStatus in [143, 137, 104, 134, 139] ? 'finish' : 'finish'
    }
    maxRetries = 2
    maxErrors  = '-1'

    // Default resource requirements
    cpus   = 1
    memory = '6.GB'
    time   = '4.h'

    // SLURM defaults (can be overridden by profile or params)
    queue          = null
    clusterOptions = null
}

/*
========================================================================================
    Executor Configuration
========================================================================================
*/

executor {
    name            = 'slurm'
    queueSize       = 100              // Max concurrent jobs
    submitRateLimit = '10 sec'         // Max 10 job submissions per second
    exitReadTimeout = '100000000 sec'    // Wait time for job status
}

/*
========================================================================================
    Notes
========================================================================================

    SLURM Error Codes Handled:
    - 143: SIGTERM (job killed)
    - 137: SIGKILL (out of memory)
    - 104: Connection reset
    - 134: SIGABRT (abort)
    - 139: SIGSEGV (segmentation fault)

    These errors trigger automatic retry (up to maxRetries=2)
========================================================================================
*/
