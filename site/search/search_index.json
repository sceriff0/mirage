{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ATEIA Documentation","text":"<p>ATEIA is a Nextflow DSL2 pipeline for multiplex microscopy processing:</p> <ol> <li>Preprocessing (image conversion and illumination correction)</li> <li>Registration (multiple methods, including tiled CPU)</li> <li>Postprocessing (segmentation, quantification, phenotyping, pyramid export)</li> <li>Result copy/archival (<code>copy_results</code>)</li> </ol> <p>This site is the canonical documentation surface for running and maintaining the pipeline.</p>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Start here: Getting Started</li> <li>Input CSV formats: Input Format</li> <li>Step and channel flow: Workflow</li> <li>Parameters and defaults: Parameters</li> <li>Restart and archival: Restartability</li> </ul>"},{"location":"#canonical-runtime-surface","title":"Canonical Runtime Surface","text":"<ul> <li><code>--step</code>: <code>preprocessing</code>, <code>registration</code>, <code>postprocessing</code>, <code>copy_results</code></li> <li><code>--registration_method</code>: <code>valis</code>, <code>valis_pairs</code>, <code>gpu</code>, <code>cpu</code>, <code>cpu_tiled</code></li> <li><code>copy_results</code> does not require <code>--input</code>; it requires <code>--outdir</code> and <code>--savedir</code></li> </ul>"},{"location":"#source-of-truth","title":"Source of Truth","text":"<ul> <li>Pipeline entrypoint: <code>main.nf</code></li> <li>Defaults: <code>nextflow.config</code></li> <li>Schema: <code>nextflow_schema.json</code></li> </ul>"},{"location":"changelog/","title":"Changelog","text":"<p>Project release notes are maintained in the repository root:</p> <ul> <li><code>CHANGELOG.md</code></li> </ul> <p>For pipeline API and behavior changes, always verify:</p> <ul> <li><code>CHANGELOG.md</code></li> <li><code>nextflow_schema.json</code></li> <li><code>nextflow.config</code></li> </ul>"},{"location":"developer_guide/","title":"Developer Guide","text":""},{"location":"developer_guide/#repository-layout","title":"Repository Layout","text":"<ul> <li>Pipeline entrypoint: <code>main.nf</code></li> <li>Subworkflows: <code>subworkflows/local/</code></li> <li>Processes/modules: <code>modules/local/</code></li> <li>Groovy helpers: <code>lib/</code></li> <li>Python tools: <code>bin/</code></li> <li>Config: <code>nextflow.config</code>, <code>conf/*.config</code></li> <li>Schema: <code>nextflow_schema.json</code></li> <li>Tests: <code>tests/</code></li> </ul>"},{"location":"developer_guide/#style-and-consistency-rules","title":"Style and Consistency Rules","text":"<ul> <li>Keep the parameter surface synchronized across:</li> <li><code>nextflow.config</code></li> <li><code>nextflow_schema.json</code></li> <li><code>params.*</code> references in code</li> <li>Run:</li> <li><code>python3 tests/check_param_consistency.py</code></li> <li>Prefer shared helpers for duplicated channel/pairwise logic (<code>lib/ChannelUtils.groovy</code>).</li> <li>Keep debug channel output gated behind <code>debug_channels</code>.</li> </ul>"},{"location":"developer_guide/#adding-a-new-module","title":"Adding a New Module","text":"<ol> <li>Add process file under <code>modules/local/</code>.</li> <li>Include it in the relevant subworkflow.</li> <li>Add process resource config in <code>conf/modules.config</code> if needed.</li> <li>Add/adjust tests (<code>tests/modules/</code> and/or subworkflow tests).</li> <li>Update docs and schema if new parameters are introduced.</li> </ol>"},{"location":"developer_guide/#python-script-pattern","title":"Python Script Pattern","text":"<p>Use consistent script shape:</p> <ul> <li><code>parse_args() -&gt; argparse.Namespace</code></li> <li><code>main() -&gt; int</code></li> <li><code>if __name__ == '__main__': raise SystemExit(main())</code></li> <li>Shared logging via <code>bin/utils/logger.py</code></li> </ul>"},{"location":"getting_started/","title":"Getting Started","text":""},{"location":"getting_started/#minimal-prerequisites","title":"Minimal Prerequisites","text":"<ul> <li>Nextflow (DSL2-capable)</li> <li>Container runtime (<code>singularity</code> or <code>docker</code>)</li> <li>CSV input with required columns for your selected <code>--step</code></li> </ul>"},{"location":"getting_started/#quick-run-full-pipeline","title":"Quick Run: Full Pipeline","text":"<pre><code>nextflow run main.nf \\\n  --input input.csv \\\n  --outdir results \\\n  --step preprocessing \\\n  --registration_method gpu \\\n  -profile slurm\n</code></pre>"},{"location":"getting_started/#quick-run-registration-from-checkpoint","title":"Quick Run: Registration from Checkpoint","text":"<pre><code>nextflow run main.nf \\\n  --input results/csv/preprocessed.csv \\\n  --step registration \\\n  --registration_method cpu_tiled \\\n  --outdir results \\\n  -profile slurm\n</code></pre>"},{"location":"getting_started/#quick-run-copy-results-to-archive","title":"Quick Run: Copy Results to Archive","text":"<pre><code>nextflow run main.nf \\\n  --step copy_results \\\n  --outdir results \\\n  --savedir /path/to/archive \\\n  --copy_delete_source false \\\n  -profile slurm\n</code></pre>"},{"location":"getting_started/#dry-validation-only","title":"Dry Validation Only","text":"<pre><code>nextflow run main.nf \\\n  --input input.csv \\\n  --step preprocessing \\\n  --dry_run true\n</code></pre>"},{"location":"getting_started/#first-checks-after-launch","title":"First Checks After Launch","text":"<ol> <li>Verify <code>results/csv/</code> checkpoint CSVs are created.</li> <li>Confirm your chosen registration method outputs in <code>results/&lt;patient_id&gt;/registered/</code>.</li> <li>Confirm postprocessing outputs in <code>results/&lt;patient_id&gt;/</code>.</li> </ol>"},{"location":"input_spec/","title":"Input Format","text":"<p>ATEIA uses CSV manifests. Required columns depend on <code>--step</code>.</p>"},{"location":"input_spec/#-step-preprocessing","title":"<code>--step preprocessing</code>","text":"<p>Required columns:</p> <ul> <li><code>patient_id</code></li> <li><code>path_to_file</code></li> <li><code>is_reference</code></li> <li><code>channels</code></li> </ul> <p>Example:</p> <pre><code>patient_id,path_to_file,is_reference,channels\nP001,/data/P001_panel1.nd2,true,DAPI|CD3|CD8|CD4\nP001,/data/P001_panel2.nd2,false,DAPI|PANCK|SMA|VIMENTIN\n</code></pre>"},{"location":"input_spec/#-step-registration","title":"<code>--step registration</code>","text":"<p>Required columns:</p> <ul> <li><code>patient_id</code></li> <li><code>preprocessed_image</code></li> <li><code>is_reference</code></li> <li><code>channels</code></li> </ul> <p>Example:</p> <pre><code>patient_id,preprocessed_image,is_reference,channels\nP001,/results/P001/preprocessed/P001_corrected.ome.tif,true,DAPI|CD3|CD8|CD4\nP001,/results/P001/preprocessed/P001_panel2_corrected.ome.tif,false,DAPI|PANCK|SMA|VIMENTIN\n</code></pre>"},{"location":"input_spec/#-step-postprocessing","title":"<code>--step postprocessing</code>","text":"<p>Required columns:</p> <ul> <li><code>patient_id</code></li> <li><code>registered_image</code></li> <li><code>is_reference</code></li> <li><code>channels</code></li> </ul> <p>Example:</p> <pre><code>patient_id,registered_image,is_reference,channels\nP001,/results/P001/registered/P001_registered.ome.tiff,true,DAPI|CD3|CD8|CD4\nP001,/results/P001/registered/P001_panel2_registered.ome.tiff,false,DAPI|PANCK|SMA|VIMENTIN\n</code></pre>"},{"location":"input_spec/#-step-copy_results","title":"<code>--step copy_results</code>","text":"<p>No CSV is required.</p> <p>Required runtime args:</p> <ul> <li><code>--outdir</code></li> <li><code>--savedir</code></li> </ul>"},{"location":"input_spec/#validation-rules","title":"Validation Rules","text":"<ul> <li>Exactly one reference image per patient at preprocessing input.</li> <li>Input files must exist.</li> <li><code>channels</code> must include DAPI and match expected image content/ordering requirements.</li> <li>For checkpoint steps, required columns must be present for that step.</li> </ul>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#requirements","title":"Requirements","text":"<ul> <li>Java 11+</li> <li>Nextflow</li> <li>One container backend:</li> <li>Singularity/Apptainer (recommended on HPC)</li> <li>Docker (local/dev)</li> </ul>"},{"location":"installation/#clone-and-enter-repository","title":"Clone and Enter Repository","text":"<pre><code>git clone &lt;your-repo-url&gt; ateia\ncd ateia\n</code></pre>"},{"location":"installation/#verify-nextflow","title":"Verify Nextflow","text":"<pre><code>nextflow -version\n</code></pre>"},{"location":"installation/#readthedocsmkdocs-dependencies","title":"ReadTheDocs/MkDocs Dependencies","text":"<p>Local docs build dependencies are in <code>docs/requirements.txt</code>:</p> <pre><code>pip install -r docs/requirements.txt\nmkdocs serve\n</code></pre>"},{"location":"installation/#execution-profiles","title":"Execution Profiles","text":"<p>Defined in <code>nextflow.config</code>:</p> <ul> <li><code>standard</code> (SLURM default)</li> <li><code>slurm</code></li> <li><code>test</code></li> <li><code>local</code></li> <li><code>docker</code></li> <li><code>singularity</code></li> </ul>"},{"location":"installation/#container-images","title":"Container Images","text":"<p>Containers are defined under <code>params.container</code> in <code>nextflow.config</code> and process-specific settings in <code>conf/modules.config</code>.</p>"},{"location":"outputs/","title":"Outputs","text":""},{"location":"outputs/#output-root","title":"Output Root","text":"<p>All outputs are written under <code>--outdir</code> (default <code>./results</code>).</p>"},{"location":"outputs/#typical-structure","title":"Typical Structure","text":"<pre><code>results/\n  csv/\n    preprocessed.csv\n    registered.csv\n    postprocessed.csv\n  &lt;patient_id&gt;/\n    preprocessed/\n    registered/\n    qc/\n      preprocess/\n      registration/\n    segmentation/\n    quantification/\n    phenotyping/\n    pyramid/\n</code></pre>"},{"location":"outputs/#checkpoint-csvs","title":"Checkpoint CSVs","text":""},{"location":"outputs/#preprocessedcsv","title":"<code>preprocessed.csv</code>","text":"<p>Used as <code>--input</code> when <code>--step registration</code>.</p> <p>Columns:</p> <ul> <li><code>patient_id</code></li> <li><code>preprocessed_image</code></li> <li><code>is_reference</code></li> <li><code>channels</code></li> </ul>"},{"location":"outputs/#registeredcsv","title":"<code>registered.csv</code>","text":"<p>Used as <code>--input</code> when <code>--step postprocessing</code>.</p> <p>Columns:</p> <ul> <li><code>patient_id</code></li> <li><code>registered_image</code></li> <li><code>is_reference</code></li> <li><code>channels</code></li> </ul>"},{"location":"outputs/#postprocessedcsv","title":"<code>postprocessed.csv</code>","text":"<p>Manifest of postprocessing outputs for each patient.</p>"},{"location":"outputs/#trace-outputs","title":"Trace Outputs","text":"<p>If <code>enable_trace=true</code>, generated files include:</p> <ul> <li><code>${trace_dir}/trace.txt</code></li> <li><code>${trace_dir}/report.html</code></li> <li><code>${trace_dir}/timeline.html</code></li> </ul>"},{"location":"parameters/","title":"Parameters","text":"<p>This page documents the active canonical parameter surface.</p>"},{"location":"parameters/#canonical-sources","title":"Canonical Sources","text":"<ul> <li>Defaults: <code>nextflow.config</code> (<code>params { ... }</code>)</li> <li>Validation/enums: <code>lib/ParamUtils.groovy</code></li> <li>Schema: <code>nextflow_schema.json</code></li> </ul>"},{"location":"parameters/#high-impact-parameters","title":"High-Impact Parameters","text":"Parameter Default Notes <code>input</code> <code>''</code> Required for <code>preprocessing</code>, <code>registration</code>, <code>postprocessing</code> <code>outdir</code> <code>./results</code> Main output root <code>savedir</code> <code>null</code> Optional archive destination <code>copy_delete_source</code> <code>false</code> Deletes source only after verified copy <code>step</code> <code>preprocessing</code> <code>preprocessing</code>, <code>registration</code>, <code>postprocessing</code>, <code>copy_results</code> <code>registration_method</code> <code>valis</code> <code>valis</code>, <code>valis_pairs</code>, <code>gpu</code>, <code>cpu</code>, <code>cpu_tiled</code> <code>debug_channels</code> <code>false</code> Enables debug channel <code>.view</code> output <code>dry_run</code> <code>false</code> Validation-only mode"},{"location":"parameters/#preprocessing","title":"Preprocessing","text":"<ul> <li><code>preproc_tile_size</code></li> <li><code>preproc_skip_dapi</code></li> <li><code>preproc_autotune</code></li> <li><code>preproc_n_iter</code></li> <li><code>preproc_pool_workers</code></li> <li><code>preproc_overlap</code></li> <li><code>preproc_no_darkfield</code></li> <li><code>preprocess_qc_scale_factor</code></li> </ul>"},{"location":"parameters/#registration","title":"Registration","text":"<ul> <li>Common:</li> <li><code>allow_auto_reference</code></li> <li><code>padding</code></li> <li><code>pad_mode</code></li> <li><code>skip_registration_qc</code></li> <li><code>qc_scale_factor</code></li> <li><code>enable_feature_error</code></li> <li><code>feature_detector</code></li> <li><code>feature_max_dim</code></li> <li><code>feature_n_features</code></li> <li>VALIS:</li> <li><code>reg_reference_markers</code></li> <li><code>memory_mode</code></li> <li><code>reg_micro_reg_fraction</code></li> <li><code>reg_max_image_dim</code></li> <li><code>skip_micro_registration</code></li> <li><code>reg_parallel_warping</code></li> <li><code>reg_n_workers</code></li> <li><code>reg_use_tiled_registration</code></li> <li><code>reg_tile_size</code></li> <li>GPU pairwise:</li> <li><code>gpu_reg_affine_crop_size</code></li> <li><code>gpu_reg_diffeo_crop_size</code></li> <li><code>gpu_reg_overlap_percent</code></li> <li><code>gpu_reg_n_features</code></li> <li><code>gpu_reg_n_workers</code></li> <li><code>gpu_reg_opt_tol</code></li> <li><code>gpu_reg_inv_tol</code></li> <li>CPU pairwise/tiled:</li> <li><code>cpu_reg_affine_crop_size</code></li> <li><code>cpu_reg_diffeo_crop_size</code></li> <li><code>cpu_reg_overlap_percent</code></li> <li><code>cpu_reg_n_features</code></li> <li><code>cpu_reg_opt_tol</code></li> <li><code>cpu_reg_inv_tol</code></li> </ul>"},{"location":"parameters/#postprocessing","title":"Postprocessing","text":"<ul> <li>Segmentation:</li> <li><code>seg_gpu</code></li> <li><code>seg_pmin</code></li> <li><code>seg_pmax</code></li> <li><code>seg_n_tiles_y</code></li> <li><code>seg_n_tiles_x</code></li> <li><code>seg_expand_distance</code></li> <li><code>segmentation_model_dir</code></li> <li><code>segmentation_model</code></li> <li>Quantification:</li> <li><code>quant_min_area</code></li> <li>Phenotyping:</li> <li><code>phenotype_config</code></li> <li><code>pheno_quality_percentile</code></li> <li><code>pheno_noise_percentile</code></li> <li>Pyramid export:</li> <li><code>pixel_size</code></li> <li><code>tilex</code></li> <li><code>tiley</code></li> <li><code>pyramid_resolutions</code></li> <li><code>pyramid_scale</code></li> <li><code>compression</code></li> </ul>"},{"location":"parameters/#infrastructure-and-limits","title":"Infrastructure and Limits","text":"<ul> <li>Cluster/runtime:</li> <li><code>slurm_partition</code></li> <li><code>slurm_account</code></li> <li><code>slurm_qos</code></li> <li><code>gpu_type</code></li> <li><code>publish_dir_mode</code></li> <li>Limits:</li> <li><code>max_memory</code></li> <li><code>max_cpus</code></li> <li><code>max_time</code></li> <li>Trace:</li> <li><code>enable_trace</code></li> <li><code>trace_dir</code></li> </ul>"},{"location":"registration_methods/","title":"Registration Methods","text":"<p>Use <code>--registration_method</code> to select one of:</p> <ul> <li><code>valis</code></li> <li><code>valis_pairs</code></li> <li><code>gpu</code></li> <li><code>cpu</code></li> <li><code>cpu_tiled</code></li> </ul>"},{"location":"registration_methods/#method-summary","title":"Method Summary","text":"Method Typical Use Tradeoff <code>valis</code> Multi-image registration using VALIS graph workflow Robust but higher memory footprint <code>valis_pairs</code> Pairwise VALIS-style registration Simpler pairing behavior <code>gpu</code> Pairwise affine + diffeomorphic registration on GPU Fastest when GPUs are available <code>cpu</code> Pairwise affine + diffeomorphic registration on CPU No GPU needed, slower <code>cpu_tiled</code> Memory-constrained CPU pairwise tiled workflow Lower per-task memory, more orchestration"},{"location":"registration_methods/#key-parameters-by-family","title":"Key Parameters by Family","text":""},{"location":"registration_methods/#common","title":"Common","text":"<ul> <li><code>allow_auto_reference</code></li> <li><code>padding</code></li> <li><code>pad_mode</code></li> <li><code>skip_registration_qc</code></li> </ul>"},{"location":"registration_methods/#valis","title":"VALIS","text":"<ul> <li><code>reg_reference_markers</code></li> <li><code>reg_max_image_dim</code></li> <li><code>reg_micro_reg_fraction</code></li> <li><code>skip_micro_registration</code></li> <li><code>reg_parallel_warping</code></li> </ul>"},{"location":"registration_methods/#gpu-pairwise","title":"GPU Pairwise","text":"<ul> <li><code>gpu_reg_affine_crop_size</code></li> <li><code>gpu_reg_diffeo_crop_size</code></li> <li><code>gpu_reg_overlap_percent</code></li> <li><code>gpu_reg_n_features</code></li> <li><code>gpu_reg_n_workers</code></li> </ul>"},{"location":"registration_methods/#cpu-pairwise-tiled","title":"CPU Pairwise / Tiled","text":"<ul> <li><code>cpu_reg_affine_crop_size</code></li> <li><code>cpu_reg_diffeo_crop_size</code></li> <li><code>cpu_reg_overlap_percent</code></li> <li><code>cpu_reg_n_features</code></li> </ul>"},{"location":"restartability_guide/","title":"Restartability and Copy Results","text":"<p>ATEIA is checkpoint-driven. Each major stage writes a CSV that can be used as input to the next stage.</p>"},{"location":"restartability_guide/#valid-step-entrypoints","title":"Valid Step Entrypoints","text":"<ul> <li><code>preprocessing</code></li> <li><code>registration</code></li> <li><code>postprocessing</code></li> <li><code>copy_results</code></li> </ul>"},{"location":"restartability_guide/#restart-patterns","title":"Restart Patterns","text":""},{"location":"restartability_guide/#full-pipeline-from-rawpreprocessing-input","title":"Full pipeline from raw/preprocessing input","text":"<pre><code>nextflow run main.nf \\\n  --input input.csv \\\n  --step preprocessing \\\n  --registration_method gpu \\\n  --outdir results\n</code></pre>"},{"location":"restartability_guide/#resume-at-registration","title":"Resume at registration","text":"<pre><code>nextflow run main.nf \\\n  --input results/csv/preprocessed.csv \\\n  --step registration \\\n  --registration_method cpu_tiled \\\n  --outdir results\n</code></pre>"},{"location":"restartability_guide/#resume-at-postprocessing","title":"Resume at postprocessing","text":"<pre><code>nextflow run main.nf \\\n  --input results/csv/registered.csv \\\n  --step postprocessing \\\n  --outdir results\n</code></pre>"},{"location":"restartability_guide/#copyarchive-only","title":"Copy/archive only","text":"<pre><code>nextflow run main.nf \\\n  --step copy_results \\\n  --outdir results \\\n  --savedir /archive/ateia_run\n</code></pre>"},{"location":"restartability_guide/#safety-behavior-for-copy_results","title":"Safety Behavior for <code>copy_results</code>","text":"<ul> <li><code>savedir</code> must be provided.</li> <li><code>savedir</code> cannot equal <code>outdir</code>.</li> <li><code>savedir</code> cannot be nested under <code>outdir</code>.</li> <li>Source directory must exist for <code>copy_results</code>.</li> <li>Source deletion is opt-in (<code>copy_delete_source=true</code>) and performed only after verification.</li> </ul>"},{"location":"slurm/","title":"Running on SLURM","text":""},{"location":"slurm/#standard-slurm-profile","title":"Standard SLURM Profile","text":"<pre><code>nextflow run main.nf \\\n  -profile slurm \\\n  --input input.csv \\\n  --outdir results \\\n  --registration_method gpu \\\n  --slurm_partition gpu \\\n  --slurm_account &lt;account&gt;\n</code></pre>"},{"location":"slurm/#gpu-controls","title":"GPU Controls","text":"<ul> <li>Segmentation GPU toggle: <code>--seg_gpu true|false</code></li> <li>Cluster GPU type hint: <code>--gpu_type nvidia_h200:1</code></li> </ul>"},{"location":"slurm/#resource-limits","title":"Resource Limits","text":"<p>These top-level limits cap process-specific resources:</p> <ul> <li><code>--max_memory</code></li> <li><code>--max_cpus</code></li> <li><code>--max_time</code></li> </ul> <p>Process-level defaults and retries are defined in <code>conf/modules.config</code>.</p>"},{"location":"slurm/#resume","title":"Resume","text":"<pre><code>nextflow run main.nf -profile slurm -resume \\\n  --input results/csv/preprocessed.csv \\\n  --step registration \\\n  --registration_method gpu \\\n  --outdir results\n</code></pre>"},{"location":"testing_guide/","title":"Testing","text":""},{"location":"testing_guide/#python-and-consistency-checks","title":"Python and Consistency Checks","text":"<pre><code>python3 tests/check_param_consistency.py\npytest --collect-only -q\npytest -q\n</code></pre>"},{"location":"testing_guide/#pipeline-oriented-tests","title":"Pipeline-Oriented Tests","text":"<pre><code>bash tests/run_tests.sh\nbash tests/run_validation_tests.sh\n</code></pre>"},{"location":"testing_guide/#nf-test","title":"nf-test","text":"<pre><code>nf-test test tests/main.nf.test\nnf-test test tests/subworkflows/local/registration.nf.test\nnf-test test tests/modules/copy_results.nf.test\n</code></pre>"},{"location":"testing_guide/#what-check_param_consistencypy-validates","title":"What <code>check_param_consistency.py</code> Validates","text":"<ul> <li><code>nextflow.config</code> <code>params</code> keys match <code>nextflow_schema.json</code></li> <li><code>params.*</code> references used across <code>.nf</code>, <code>.groovy</code>, and <code>conf/*.config</code> are synchronized</li> </ul>"},{"location":"testing_guide/#optionalheavy-dependencies","title":"Optional/Heavy Dependencies","text":"<p>Some unit tests depend on optional runtime packages (for example <code>valis</code>, <code>csbdeep</code>, <code>stardist</code>, <code>basicpy</code>). Tests for those paths are designed to skip cleanly when dependencies are unavailable.</p>"},{"location":"troubleshooting/","title":"Troubleshooting","text":""},{"location":"troubleshooting/#invalid-step-or-invalid-registration_method","title":"<code>Invalid --step</code> or <code>Invalid --registration_method</code>","text":"<p>Use only supported enums:</p> <ul> <li>Step: <code>preprocessing</code>, <code>registration</code>, <code>postprocessing</code>, <code>copy_results</code></li> <li>Registration: <code>valis</code>, <code>valis_pairs</code>, <code>gpu</code>, <code>cpu</code>, <code>cpu_tiled</code></li> </ul>"},{"location":"troubleshooting/#-input-validation-errors","title":"<code>--input</code> Validation Errors","text":"<p><code>--input</code> is required for:</p> <ul> <li><code>preprocessing</code></li> <li><code>registration</code></li> <li><code>postprocessing</code></li> </ul> <p><code>copy_results</code> does not use CSV input.</p>"},{"location":"troubleshooting/#copy_results-path-errors","title":"<code>copy_results</code> Path Errors","text":"<p>Common causes:</p> <ul> <li>Missing <code>--savedir</code></li> <li><code>savedir</code> equals <code>outdir</code></li> <li><code>savedir</code> nested inside <code>outdir</code></li> <li>Missing source directory</li> </ul>"},{"location":"troubleshooting/#out-of-memory-runtime-failures","title":"Out-of-Memory / Runtime Failures","text":"<p>Actions:</p> <ol> <li>Lower memory pressure by switching method (for example <code>valis</code> -&gt; <code>gpu</code> or <code>cpu_tiled</code>).</li> <li>Increase global caps (<code>max_memory</code>, <code>max_time</code>).</li> <li>Check process-specific settings in <code>conf/modules.config</code>.</li> <li>Resume with <code>-resume</code> after adjustments.</li> </ol>"},{"location":"troubleshooting/#nextflow-not-found","title":"Nextflow Not Found","text":"<p>If <code>nextflow</code> is not installed or not in <code>PATH</code>, install/activate it and retry:</p> <pre><code>nextflow -version\n</code></pre>"},{"location":"troubleshooting/#debug-channel-visibility","title":"Debug Channel Visibility","text":"<p>Set:</p> <pre><code>--debug_channels true\n</code></pre> <p>to enable channel-level debug <code>.view</code> output in subworkflows where supported.</p>"},{"location":"workflow/","title":"Workflow","text":""},{"location":"workflow/#pipeline-stages","title":"Pipeline Stages","text":""},{"location":"workflow/#1-preprocessing","title":"1. Preprocessing","text":"<ul> <li>Convert/normalize source images</li> <li>Correct illumination artifacts</li> <li>Split channels</li> <li>Emit checkpoint: <code>results/csv/preprocessed.csv</code></li> </ul>"},{"location":"workflow/#2-registration","title":"2. Registration","text":"<ul> <li>Group by patient</li> <li>Select reference image</li> <li>Register moving images to reference using selected method</li> <li>Emit checkpoint: <code>results/csv/registered.csv</code></li> </ul>"},{"location":"workflow/#3-postprocessing","title":"3. Postprocessing","text":"<ul> <li>Segmentation</li> <li>Quantification</li> <li>Phenotyping</li> <li>Merge channels and produce pyramidal OME-TIFF</li> <li>Emit checkpoint: <code>results/csv/postprocessed.csv</code></li> </ul>"},{"location":"workflow/#4-copy-results","title":"4. Copy Results","text":"<ul> <li>Archive/copy full output tree from <code>outdir</code> to <code>savedir</code></li> <li>Optional source deletion only if <code>--copy_delete_source true</code></li> <li>Path preflight checks prevent unsafe copy/delete configurations</li> </ul>"},{"location":"workflow/#workflow-control","title":"Workflow Control","text":"<p><code>main.nf</code> orchestrates step-specific entrypoints:</p> <ul> <li><code>preprocessing</code>: runs all downstream stages</li> <li><code>registration</code>: starts from preprocessed checkpoint</li> <li><code>postprocessing</code>: starts from registered checkpoint</li> <li><code>copy_results</code>: copy/archive only</li> </ul>"},{"location":"workflow/#tracing","title":"Tracing","text":"<p>If <code>enable_trace=true</code>, Nextflow trace/report/timeline files are written to <code>trace_dir</code>.</p>"}]}